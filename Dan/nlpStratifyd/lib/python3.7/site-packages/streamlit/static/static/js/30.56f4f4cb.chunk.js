(window["webpackJsonpstreamlit-browser"]=window["webpackJsonpstreamlit-browser"]||[]).push([[30],{3047:function(e,t,r){},3073:function(e,t,r){"use strict";r.r(t);var a=r(41),n=r(8),s=r(10),o=r(12),i=r(11),l=r(13),c=r(0),u=r.n(c),d=r(81),p=r(4),f=r(3035),g=r(211);r(3047);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleFileRead=function(e,t){if(null!==e.target){if(!(e.target.result instanceof ArrayBuffer)){var a="This file is not ArrayBuffer type.";return console.warn(a),Promise.reject(a)}r.props.widgetStateManager.sendUploadFileMessage(r.props.element.get("id"),t.name,t.lastModified,new Uint8Array(e.target.result))}return new Promise(function(e){r.setState({status:"UPLOADING"},function(){e()})})},r.dropHandler=function(e,t,a){var n=[],s=r.props.element.get("maxUploadSizeMb");if(t.length>0){var o="".concat(t[0].type," files are not allowed");return r.setState({status:"ERROR",errorMessage:o}),Promise.reject(o)}return r.setState({acceptedFiles:e,status:"READING"}),e.forEach(function(e){if(e.size/1024/1024<s){var t=new FileReader;n.push(new Promise(function(a,n){t.onerror=function(){t.abort(),n(new DOMException("Problem parsing input file."))},t.onload=function(t){r.handleFileRead(t,e).then(function(){a()})},t.readAsArrayBuffer(e)}))}else r.setState({status:"ERROR",errorMessage:"The max file size allowed is ".concat(s,"MB")})}),Promise.all(n)},r.reset=function(){r.setState({status:"READY",errorMessage:void 0,acceptedFiles:[]})},r.renderErrorMessage=function(){var e=r.state.errorMessage;return u.a.createElement("div",{className:"uploadStatus uploadError"},u.a.createElement("span",{className:"body"},u.a.createElement(d.a,{className:"icon",type:"warning"})," ",e),u.a.createElement(p.Button,{outline:!0,size:"sm",onClick:r.reset},"OK"))},r.renderUploadingMessage=function(){return u.a.createElement("div",{className:"uploadStatus uploadProgress"},u.a.createElement("span",{className:"body"},u.a.createElement(p.Spinner,{color:"secondary",size:"sm"})," Uploading..."),u.a.createElement(p.Button,{outline:!0,size:"sm",onClick:function(){r.setState({status:"UPLOADED",errorMessage:void 0}),r.props.widgetStateManager.sendDeleteUploadedFileMessage(r.props.element.get("id"))}},"Cancel"))},r.renderFileUploader=function(){var e=r.state,t=e.status,a=e.errorMessage,n=r.props.element.get("type").toArray().map(function(e){return"."+e}),s=g.d;return"UPLOADED"===t&&((s=O({},s)).ContentMessage=O({},s.ContentMessage),s.ContentMessage.style=O({},s.ContentMessage.style),s.ContentMessage.style.visibility="hidden",s.ContentMessage.style.overflow="hidden",s.ContentMessage.style.height="0.625rem"),u.a.createElement(u.a.Fragment,null,"UPLOADED"===t?u.a.createElement("div",{className:"uploadOverlay uploadDone"},u.a.createElement("span",{className:"body"},r.state.acceptedFiles[0].name)):null,u.a.createElement(f.FileUploader,{onDrop:r.dropHandler,errorMessage:a,accept:0===n.length?void 0:n,disabled:r.props.disabled,overrides:s}))},r.render=function(){var e=r.state.status,t=r.props.element.get("label");return u.a.createElement("div",{className:"Widget stFileUploader"},u.a.createElement("label",null,t),"ERROR"===e?r.renderErrorMessage():"UPLOADING"===e?r.renderUploadingMessage():r.renderFileUploader())},r.state={status:"READY",errorMessage:void 0,acceptedFiles:[]},r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.element.get("progress");"UPLOADING"===this.state.status&&t>=100&&this.setState({status:"UPLOADED"})}}]),t}(u.a.PureComponent);r.d(t,"default",function(){return b})}}]);
//# sourceMappingURL=30.56f4f4cb.chunk.js.map